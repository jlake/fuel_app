■リダイレクト

Response::redirect('controller/action');


■URLパラメータの取得

①print_r(\Request::main()->uri);

②print_r(\Request::main()->uri->get_segments());

③print_r(\Request::main()->uri->get_segment(1));

④print_r(\Request::main()->uri->string());

■セッション処理

Session::set_flash($variable, $value = null)
Session::get_flash($variable, $default = null)

■SQLの実行

$user1 = DB::query('
            SELECT MESSAGES.*,USERS.USERNAME
            FROM MESSAGES
            LEFT JOIN MSG_USER_RALATIONS
            ON MESSAGES.ID=MSG_USER_RALATIONS.MSG_ID
            LEFT JOIN USERS
            ON USERS.ID=MSG_USER_RALATIONS.USER_ID
            LIMIT 1 OFFSET 1
        ')->execute()->as_array();
print_r($user1);

■controllerとview

①通常controller
    $view = View::forge('demo/create');
    //assign variables for the view
    $view->username = 'Joe14';
    $view->title = 'Home';

    //another way to assign variables for the view
    $view->set('username', 'Joe14');
    $view->set('title', 'Home');

    // assign global variables so all views have access to them
    $view->set_global('username', 'Joe14');
    $view->set_global('title', 'Home');
    $view->set_global('site_title', 'My Website');

    //assign views as variables, lazy rendering
    $view->head = View::forge('head');
    $view->header = View::forge('header');
    $view->content = View::forge('content');
    $view->footer = View::forge('footer');

    //assign the view to browser output
    return $view;

    //another way toassign the view to browser output
    return Response::forge($view);

②テンプレートcontroller

    public $template = 'template_admin';

    $this->template->title = "message create";
    $this->template->content = View::forge('demo/create');

    return new Response(View::forge('index/test', $data));

■controllerからviewへデータを渡す

    // HTMLエンコードしない
    $view->set('users', $users, false);
    // HTMLエンコードする
    $view->set(array(
         'users' => $users,
         'articles' => $articles,
      ), null, true);

    // HTMLエンコードする
    return new Response(View::forge('index/test', $data，true));